<!DOCTYPE html>
<html>
<head>
  <title>Bee Style 3D</title>
  <style>
    body { margin:0; overflow:hidden; font-family:Arial; }
    #ui {
      position:fixed;
      top:10px;
      left:50%;
      transform:translateX(-50%);
      background:rgba(0,0,0,0.75);
      color:white;
      padding:10px 20px;
      border-radius:10px;
      display:flex;
      gap:30px;
      z-index:10;
      font-size:18px;
    }
    #popup {
      position:fixed;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      background:rgba(0,0,0,0.8);
      color:white;
      padding:15px 25px;
      border-radius:10px;
      display:none;
      z-index:10;
    }
  </style>
</head>
<body>

<div id="ui">
  üåº Pollen: <span id="pollen">0</span>
  üçØ Honey: <span id="honey">0</span>
</div>

<div id="popup"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,10,20);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff,0.6));
const sun = new THREE.DirectionalLight(0xffffff,1);
sun.position.set(10,30,10);
scene.add(sun);

/* GROUND */
const ground = new THREE.Mesh(
  new THREE.PlaneGeometry(300,300),
  new THREE.MeshStandardMaterial({color:0x4caf50})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

/* PLAYER */
const player = new THREE.Mesh(
  new THREE.BoxGeometry(1,1,1),
  new THREE.MeshStandardMaterial({color:0xffff00})
);
player.position.y = 0.5;
scene.add(player);

/* STATS */
let pollen = 0;
let honey = 0;
let bees = 1;

/* ZONES */
const zones = [];
function makeZone(x,z,color){
  const zone = new THREE.Mesh(
    new THREE.BoxGeometry(20,0.1,20),
    new THREE.MeshStandardMaterial({color})
  );
  zone.position.set(x,0.05,z);
  scene.add(zone);
  zones.push(zone);
}
makeZone(0,0,0x66ff66);      // Starter
makeZone(30,0,0x88ff88);    // 5 Bee
makeZone(-30,0,0x55cc55);   // 10 Bee
makeZone(0,30,0x77dd77);    // 15 Bee

/* SHOP BUILDING */
const shop = new THREE.Mesh(
  new THREE.BoxGeometry(8,6,8),
  new THREE.MeshStandardMaterial({color:0xffc107})
);
shop.position.set(40,3,40);
scene.add(shop);

/* HIVES (Bee Swarm‚Äìstyle wall + slots) */
const hiveGroup = new THREE.Group();
for(let i=0;i<5;i++){
  for(let j=0;j<5;j++){
    const slot = new THREE.Mesh(
      new THREE.BoxGeometry(1,1,0.3),
      new THREE.MeshStandardMaterial({color:0xffffff})
    );
    slot.position.set(i*1.2-3, j*1.2+1, -60);
    hiveGroup.add(slot);
  }
}
scene.add(hiveGroup);

/* CONTROLS */
const keys = {};
addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

/* UI */
const popup = document.getElementById("popup");
function show(text){
  popup.innerText = text;
  popup.style.display="block";
}
function hide(){ popup.style.display="none"; }

/* LOOP */
function animate(){
  requestAnimationFrame(animate);

  if(keys.w) player.position.z -= 0.25;
  if(keys.s) player.position.z += 0.25;
  if(keys.a) player.position.x -= 0.25;
  if(keys.d) player.position.x += 0.25;

  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 20;
  camera.lookAt(player.position);

  let nearSomething = false;

  zones.forEach(z=>{
    if(player.position.distanceTo(z.position)<5){
      pollen += bees * 0.2;
      nearSomething = true;
      show("üåº Collecting pollen");
    }
  });

  if(player.position.distanceTo(shop.position)<6){
    nearSomething = true;
    show("üè™ Shop: Honey ‚Üí Buy Bees (auto)");
    if(honey>=5){
      honey-=5;
      bees++;
    }
  }

  if(player.position.z < -55){
    nearSomething = true;
    show("üêù Hive: Your bees live here");
  }

  if(!nearSomething) hide();

  if(pollen>=10){
    pollen-=10;
    honey++;
  }

  document.getElementById("pollen").innerText=Math.floor(pollen);
  document.getElementById("honey").innerText=honey;

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
